<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>ููุธููู โ ุงูููุงุฏ</title>
  <link rel="stylesheet" href="style.css"/>
  
  <!-- ุฅุถุงูุงุช PWA -->
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#5b2dd6">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="ููุธููู">
  <link rel="apple-touch-icon" href="icon-192.png">
</head>
<body>
  <header class="app-bar">
    <h1>ููุธููู <span class="logo">๐</span></h1>
    <!-- ุชู ุฅุฒุงูุฉ ุดุฑูุท ุงูุจุญุซ ูู ููุง -->
  </header>

  <!-- ุงูุดุงุดุฉ ุงูุฑุฆูุณูุฉ -->
  <main id="home" class="screen active">
    <section class="subjects" id="subjectsGrid"></section>
    <button id="addSubjectBtn" class="fab fab-main">โ ุฅุถุงูุฉ ูุงุฏุฉ</button>
  </main>

  <!-- ุดุงุดุฉ ุงููุงุฏุฉ -->
  <main id="subject" class="screen">
    <div class="subject-header">
      <button id="backBtn" class="back" title="ุฑุฌูุน">โฉ</button>
      <div class="subject-title">
        <span id="subjectIcon" class="subject-emoji">๐</span>
        <h2 id="subjectName">โ</h2>
        <span id="subjectMood" class="mood">๐</span>
      </div>
    </div>

    <div class="tabs">
      <button class="tab active" data-tab="notes">๐ ููุงุญุธุงุช</button>
      <button class="tab" data-tab="files">๐ ูููุงุช</button>
      <button class="tab" data-tab="images">๐ผ๏ธ ุตูุฑ</button>
      <button class="tab" data-tab="audio">๐ต ุตูุชูุงุช</button>
    </div>

    <!-- Notes -->
    <section class="tab-body active" id="tab-notes" data-scope="notes">
      <div class="empty" data-empty="notes">ูุง ุชูุฌุฏ ููุงุญุธุงุช</div>
      <ul id="notesList" class="list"></ul>
      <button class="fab fab-notes" data-add="note" title="ุฅุถุงูุฉ ููุงุญุธุฉ">โ</button>
    </section>

    <!-- Files -->
    <section class="tab-body" id="tab-files" data-scope="files">
      <div class="empty" data-empty="files">ูุง ุชูุฌุฏ ูููุงุช</div>
      <div id="filesList" class="files-grid"></div>
      <button class="fab fab-files" data-add="file" title="ุฅุถุงูุฉ ููู">โ</button>
    </section>

    <!-- Images -->
    <section class="tab-body" id="tab-images" data-scope="images">
      <div class="empty" data-empty="images">ูุง ุชูุฌุฏ ุตูุฑ</div>
      <div id="imagesList" class="images-grid"></div>
      <button class="fab fab-images" data-add="image" title="ุฅุถุงูุฉ ุตูุฑุฉ">โ</button>
    </section>

    <!-- Audio -->
    <section class="tab-body" id="tab-audio" data-scope="audio">
      <div class="empty" data-empty="audio">ูุง ุชูุฌุฏ ุตูุชูุงุช</div>
      <div id="audioList" class="audio-grid"></div>
      <button class="fab fab-audio" data-add="audio" title="ุฅุถุงูุฉ ุตูุชูุฉ">โ</button>
    </section>

    <div id="trashBar" class="trash-bar">
      <span>ุชุญุฏูุฏ ูุชุนุฏุฏ โ ุญุฐู</span>
      <button id="trashBtn" class="trash">๐๏ธ</button>
      <button id="cancelSelect" class="cancel">ุฅูุบุงุก</button>
    </div>
  </main>

  <!-- Modal ูุนุฑุถ ุงูุตูุฑุฉ ุจุงูุญุฌู ุงููุงูู -->
  <div id="imageModal" class="modal">
    <img id="modalImage" src="" alt="full"/>
  </div>

  <!-- ุญูุงุฑุงุช -->
  <dialog id="subjectDialog" class="dialog">
    <form method="dialog" id="subjectForm">
      <h3>ูุงุฏุฉ ุฌุฏูุฏุฉ</h3>
      <label>ุงุณู ุงููุงุฏุฉ</label>
      <input id="subjectInput" required>
      <label>ุงูุฃููููุฉ</label>
      <div class="emoji-row" id="iconRow">
        <button type="button">๐</button><button type="button">๐</button><button type="button">๐</button>
        <button type="button">๐ฌ</button><button type="button">๐งช</button><button type="button">๐งฎ</button>
        <button type="button">๐ญ</button><button type="button">๐ง</button><button type="button">๐ป</button>
      </div>
      <input id="iconPicked" hidden value="๐">
      <label>ูุณุชูู ุงูููู (ุงุฎุชุฑ ุฅูููุฌู)</label>
      <div class="emoji-row" id="moodRow">
        <button type="button">๐</button><button type="button">๐</button><button type="button">๐</button>
        <button type="button">๐ค</button><button type="button">โน๏ธ</button><button type="button">๐ต</button>
      </div>
      <input id="moodPicked" hidden value="๐">
      <label>ุงูููู</label>
      <div class="color-row" id="colorRow">
        <button type="button" data-color="#7E57C2" style="background:#7E57C2"></button>
        <button type="button" data-color="#43A047" style="background:#43A047"></button>
        <button type="button" data-color="#0288D1" style="background:#0288D1"></button>
        <button type="button" data-color="#F4511E" style="background:#F4511E"></button>
        <button type="button" data-color="#6D4C41" style="background:#6D4C41"></button>
        <button type="button" data-color="#00897B" style="background:#00897B"></button>
        <button type="button" data-color="#E91E63" style="background:#E91E63"></button>
      </div>
      <input id="colorPicked" hidden value="#7E57C2">
      <menu>
        <button value="cancel">ุฅูุบุงุก</button>
        <button id="saveSubject" value="default">ุญูุธ</button>
      </menu>
    </form>
  </dialog>

  <dialog id="noteDialog" class="dialog">
    <form method="dialog" id="noteForm">
      <h3>ููุงุญุธุฉ ุฌุฏูุฏุฉ</h3>
      <textarea id="noteText" rows="5" placeholder="ุฃุฏุฎู ุงููุต ููุง..."></textarea>
      <menu>
        <button value="cancel">ุฅูุบุงุก</button>
        <button id="saveNote" value="default">ุญูุธ</button>
      </menu>
    </form>
  </dialog>

  <dialog id="fileDialog" class="dialog">
    <form method="dialog" id="fileForm">
      <h3>ููู ุฌุฏูุฏ</h3>
      <label>ุงุณู (ุงุฎุชูุงุฑู)</label>
      <input id="fileTitle" placeholder="ุนููุงู ุงูููู">
      <label>ุงุฎุชุฑ ููููุง</label>
      <input id="fileInput" type="file" accept=".pdf,.doc,.docx,.ppt,.pptx,.txt,.xlsx,.xls,.csv,.zip,.rar,.7z,.json,.md,.html,.js,.css,.ts,.py,.java,.c,.cpp">
      <small>ุณูุชู ุญูุธ ุงูููู ุฏุงุฎู IndexedDB ุนูู ุฌูุงุฒู.</small>
      <menu>
        <button value="cancel">ุฅูุบุงุก</button>
        <button id="saveFile" value="default">ุญูุธ</button>
      </menu>
    </form>
  </dialog>

  <dialog id="imageDialog" class="dialog">
    <form method="dialog" id="imageForm">
      <h3>ุตูุฑุฉ ุฌุฏูุฏุฉ</h3>
      <input id="imageInput" type="file" accept="image/*">
      <menu>
        <button value="cancel">ุฅูุบุงุก</button>
        <button id="saveImage" value="default">ุญูุธ</button>
      </menu>
    </form>
  </dialog>

  <dialog id="audioDialog" class="dialog">
    <form method="dialog" id="audioForm">
      <h3>ุตูุชูุฉ ุฌุฏูุฏุฉ</h3>
      <input id="audioInput" type="file" accept="audio/*">
      <menu>
        <button value="cancel">ุฅูุบุงุก</button>
        <button id="saveAudio" value="default">ุญูุธ</button>
      </menu>
    </form>
  </dialog>

  <script src="app.js"></script>
  
  <!-- ุชุณุฌูู Service Worker -->
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('sw.js')
          .then(registration => {
            console.log('ServiceWorker registered successfully: ', registration.scope);
          })
          .catch(error => {
            console.log('ServiceWorker registration failed: ', error);
          });
      });
    }
  </script>
</body>
</html>